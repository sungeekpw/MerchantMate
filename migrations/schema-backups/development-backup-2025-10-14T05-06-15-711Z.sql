-- Database backup for development environment
-- Generated at: 2025-10-14T05:06:16.092Z
-- Warning: This is a simplified backup for migration safety

CREATE TABLE public.acquirer_application_templates (version text NOT NULL DEFAULT '1.0'::text, template_name text NOT NULL, updated_at timestamp without time zone NOT NULL DEFAULT now(), created_at timestamp without time zone NOT NULL DEFAULT now(), required_fields ARRAY NOT NULL DEFAULT ARRAY[]::text[], pdf_mapping_configuration jsonb, id integer NOT NULL DEFAULT nextval('acquirer_application_templates_id_seq'::regclass), is_active boolean NOT NULL DEFAULT true, acquirer_id integer NOT NULL, field_configuration jsonb NOT NULL, conditional_fields jsonb);
CREATE TABLE public.acquirers (created_at timestamp without time zone NOT NULL DEFAULT now(), is_active boolean NOT NULL DEFAULT true, id integer NOT NULL DEFAULT nextval('acquirers_id_seq'::regclass), description text, display_name text NOT NULL, updated_at timestamp without time zone NOT NULL DEFAULT now(), name text NOT NULL, code text NOT NULL);
CREATE TABLE public.action_activity (delivered_at timestamp without time zone, context_data jsonb, trigger_source character varying, status_message text, trigger_action_id integer, action_template_id integer, recipient character varying NOT NULL, recipient_name character varying, status character varying NOT NULL, executed_at timestamp without time zone DEFAULT now(), response_data jsonb, trigger_id integer, failed_at timestamp without time zone, triggered_by character varying, action_type character varying NOT NULL, id integer NOT NULL DEFAULT nextval('action_activity_id_seq'::regclass), retry_count integer DEFAULT 0);
CREATE TABLE public.action_templates (description text, action_type character varying NOT NULL, updated_at timestamp without time zone DEFAULT now(), config jsonb NOT NULL, created_at timestamp without time zone DEFAULT now(), is_active boolean DEFAULT true, name character varying NOT NULL, category character varying NOT NULL, version integer DEFAULT 1, variables jsonb, id integer NOT NULL DEFAULT nextval('action_templates_id_seq'::regclass));
CREATE TABLE public.addresses (id integer NOT NULL DEFAULT nextval('addresses_id_seq'::regclass), geo_accuracy real, street2 text, city text NOT NULL, country text NOT NULL DEFAULT 'US'::text, longitude real, created_at timestamp without time zone NOT NULL DEFAULT now(), location_id integer, timezone text, state text NOT NULL, type text NOT NULL DEFAULT 'primary'::text, postal_code text NOT NULL, latitude real, street1 text NOT NULL, geocoded_at timestamp without time zone);
CREATE TABLE public.agent_merchants (id integer NOT NULL DEFAULT nextval('agent_merchants_id_seq'::regclass), assigned_at timestamp without time zone DEFAULT now(), agent_id integer NOT NULL, merchant_id integer NOT NULL, assigned_by text);
CREATE TABLE public.agents (user_id character varying NOT NULL, status text NOT NULL DEFAULT 'active'::text, created_at timestamp without time zone DEFAULT now(), commission_rate numeric DEFAULT 5.00, territory text, id integer NOT NULL DEFAULT nextval('agents_id_seq'::regclass), last_name text NOT NULL, first_name text NOT NULL, company_id integer NOT NULL);
CREATE TABLE public.api_keys (last_used_at timestamp without time zone, created_at timestamp without time zone NOT NULL DEFAULT now(), rate_limit integer DEFAULT 1000, key_id text NOT NULL, contact_email text NOT NULL, permissions jsonb NOT NULL DEFAULT '[]'::jsonb, updated_at timestamp without time zone NOT NULL DEFAULT now(), id integer NOT NULL DEFAULT nextval('api_keys_id_seq'::regclass), key_secret text NOT NULL, name text NOT NULL, organization_name text, expires_at timestamp without time zone, is_active boolean DEFAULT true);
CREATE TABLE public.api_request_logs (response_size integer, response_time integer, user_agent text, request_size integer, status_code integer NOT NULL, method text NOT NULL, ip_address text, error_message text, endpoint text NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now(), id integer NOT NULL DEFAULT nextval('api_request_logs_id_seq'::regclass), api_key_id integer);
CREATE TABLE public.audit_logs (resource_type text, resource text NOT NULL, user_agent text, severity text DEFAULT 'info'::text, request_id character varying, application_version text, new_values jsonb, outcome text, id integer NOT NULL DEFAULT nextval('audit_logs_id_seq'::regclass), updated_at timestamp without time zone DEFAULT now(), risk_level text NOT NULL DEFAULT 'low'::text, correlation_id character varying, request_params jsonb, ip_address text NOT NULL, response_time integer, tags jsonb, method text, geolocation jsonb, session_id text, environment text DEFAULT 'production'::text, user_id character varying, old_values jsonb, action text NOT NULL, data_classification text, resource_id text, created_at timestamp without time zone NOT NULL DEFAULT now(), metadata jsonb, status_code integer, retention_policy text, user_email text, notes text, details jsonb, error_message text, encryption_key_id character varying, request_body jsonb, compliance_flags jsonb, timestamp timestamp without time zone NOT NULL DEFAULT now(), device_info jsonb, category text, endpoint text);
CREATE TABLE public.business_ownership (digital_signature text, id integer NOT NULL DEFAULT nextval('business_ownership_id_seq'::regclass), signature_image_path text, signed_at timestamp without time zone, requires_signature boolean NOT NULL DEFAULT false, owner_name text NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now(), updated_at timestamp without time zone NOT NULL DEFAULT now(), ownership_percentage numeric NOT NULL, signature_type text, owner_email text NOT NULL, form_submission_id integer, signature_token text, prospect_id integer);
CREATE TABLE public.campaign_assignments (application_id integer, prospect_id integer, is_active boolean NOT NULL DEFAULT true, assigned_by character varying, campaign_id integer NOT NULL, id integer NOT NULL DEFAULT nextval('campaign_assignments_id_seq'::regclass), assigned_at timestamp without time zone NOT NULL DEFAULT now());
CREATE TABLE public.campaign_equipment (is_required boolean NOT NULL DEFAULT false, id integer NOT NULL DEFAULT nextval('campaign_equipment_id_seq'::regclass), created_at timestamp without time zone NOT NULL DEFAULT now(), campaign_id integer NOT NULL, display_order integer NOT NULL DEFAULT 0, equipment_item_id integer NOT NULL);
CREATE TABLE public.campaign_fee_values (fee_group_fee_item_id integer, value_type text NOT NULL DEFAULT 'percentage'::text, updated_at timestamp without time zone NOT NULL DEFAULT now(), campaign_id integer NOT NULL, fee_item_id integer NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now(), id integer NOT NULL DEFAULT nextval('campaign_fee_values_id_seq'::regclass), value text NOT NULL);
CREATE TABLE public.campaigns (pricing_type_id integer, acquirer text, created_at timestamp without time zone NOT NULL DEFAULT now(), acquirer_id integer NOT NULL, is_default boolean NOT NULL DEFAULT false, id integer NOT NULL DEFAULT nextval('campaigns_id_seq'::regclass), name text NOT NULL, description text, currency text NOT NULL DEFAULT 'USD'::text, updated_at timestamp without time zone NOT NULL DEFAULT now(), created_by character varying, equipment text, is_active boolean NOT NULL DEFAULT true);
CREATE TABLE public.companies (industry text, address jsonb, phone text, created_at timestamp without time zone NOT NULL DEFAULT now(), settings jsonb DEFAULT '{}'::jsonb, name text NOT NULL, description text, status text NOT NULL DEFAULT 'active'::text, website text, logo_url text, email text, id integer NOT NULL DEFAULT nextval('companies_id_seq'::regclass), business_type text, updated_at timestamp without time zone NOT NULL DEFAULT now(), tax_id character varying);
CREATE TABLE public.company_addresses (created_at timestamp without time zone NOT NULL DEFAULT now(), address_id integer NOT NULL, company_id integer NOT NULL, id integer NOT NULL DEFAULT nextval('company_addresses_id_seq'::regclass), type text NOT NULL DEFAULT 'primary'::text);
CREATE TABLE public.data_access_logs (user_id character varying NOT NULL, data_type text NOT NULL, record_id text, audit_log_id integer, created_at timestamp without time zone NOT NULL DEFAULT now(), access_reason text, id integer NOT NULL DEFAULT nextval('data_access_logs_id_seq'::regclass), retention_period integer, table_name text NOT NULL, data_volume integer, field_accessed text, lawful_basis text, access_type text NOT NULL);
CREATE TABLE public.email_activity (opened_at timestamp without time zone, metadata jsonb, id integer NOT NULL DEFAULT nextval('email_activity_id_seq'::regclass), subject text NOT NULL, template_id integer, status character varying NOT NULL, recipient_name character varying, triggered_by character varying, clicked_at timestamp without time zone, recipient_email character varying NOT NULL, sent_at timestamp without time zone DEFAULT now(), error_message text, template_name character varying NOT NULL, trigger_source character varying);
CREATE TABLE public.email_templates (html_content text NOT NULL, wrapper_type character varying DEFAULT 'notification'::character varying, header_subtitle text, custom_footer text, name character varying NOT NULL, cta_button_text text, use_wrapper boolean DEFAULT true, created_at timestamp without time zone DEFAULT now(), cta_button_color text, cta_button_url text, subject text NOT NULL, updated_at timestamp without time zone DEFAULT now(), id integer NOT NULL DEFAULT nextval('email_templates_id_seq'::regclass), description text, header_gradient text, is_active boolean DEFAULT true, category character varying NOT NULL, variables jsonb, text_content text);
CREATE TABLE public.email_triggers (is_active boolean DEFAULT true, trigger_event character varying NOT NULL, template_id integer, name character varying NOT NULL, id integer NOT NULL DEFAULT nextval('email_triggers_id_seq'::regclass), description text, created_at timestamp without time zone DEFAULT now(), conditions jsonb, updated_at timestamp without time zone DEFAULT now());
CREATE TABLE public.email_wrappers (header_subtitle text, custom_footer text, updated_at timestamp without time zone DEFAULT now(), created_at timestamp without time zone DEFAULT now(), cta_button_text text, name character varying NOT NULL, cta_button_color text, type character varying NOT NULL, cta_button_url text, id integer NOT NULL DEFAULT nextval('email_wrappers_id_seq'::regclass), is_active boolean DEFAULT true, description text, header_gradient text);
CREATE TABLE public.equipment_items (is_active boolean NOT NULL DEFAULT true, specifications jsonb DEFAULT '{}'::jsonb, name text NOT NULL, model text, image_url text, created_at timestamp without time zone NOT NULL DEFAULT now(), model_number text, description text, image_data text, id integer NOT NULL DEFAULT nextval('equipment_items_id_seq'::regclass), category text, manufacturer text, price numeric, updated_at timestamp without time zone NOT NULL DEFAULT now(), status text DEFAULT 'available'::text);
CREATE TABLE public.fee_group_fee_items (fee_item_group_id integer, display_order integer NOT NULL DEFAULT 0, created_at timestamp without time zone NOT NULL DEFAULT now(), fee_group_id integer NOT NULL, id integer NOT NULL DEFAULT nextval('fee_group_fee_items_id_seq'::regclass), fee_item_id integer NOT NULL, is_required boolean NOT NULL DEFAULT false);
CREATE TABLE public.fee_groups (updated_at timestamp without time zone NOT NULL DEFAULT now(), name text NOT NULL, is_active boolean NOT NULL DEFAULT true, author text NOT NULL DEFAULT 'System'::text, display_order integer NOT NULL DEFAULT 0, id integer NOT NULL DEFAULT nextval('fee_groups_id_seq'::regclass), description text, created_at timestamp without time zone NOT NULL DEFAULT now());
CREATE TABLE public.fee_item_groups (id integer NOT NULL DEFAULT nextval('fee_item_groups_id_seq'::regclass), author text NOT NULL DEFAULT 'System'::text, updated_at timestamp without time zone NOT NULL DEFAULT now(), description text, fee_group_id integer NOT NULL, name text NOT NULL, is_active boolean NOT NULL DEFAULT true, created_at timestamp without time zone NOT NULL DEFAULT now(), display_order integer NOT NULL DEFAULT 0);
CREATE TABLE public.fee_items (name text NOT NULL, display_order integer NOT NULL DEFAULT 0, value_type text NOT NULL, is_active boolean NOT NULL DEFAULT true, fee_item_group_id integer, default_value text, created_at timestamp without time zone NOT NULL DEFAULT now(), updated_at timestamp without time zone NOT NULL DEFAULT now(), additional_info text, description text, author text NOT NULL DEFAULT 'System'::text, id integer NOT NULL DEFAULT nextval('fee_items_id_seq'::regclass));
CREATE TABLE public.locations (name text NOT NULL, type text NOT NULL DEFAULT 'store'::text, mid character varying, operating_hours jsonb, merchant_id integer, company_id integer, email text, id integer NOT NULL DEFAULT nextval('locations_id_seq'::regclass), created_at timestamp without time zone NOT NULL DEFAULT now(), phone text, status text NOT NULL DEFAULT 'active'::text);
CREATE TABLE public.login_attempts (ip_address character varying NOT NULL, user_agent text, email character varying, id integer NOT NULL DEFAULT nextval('login_attempts_id_seq'::regclass), failure_reason character varying, success boolean NOT NULL, username character varying, created_at timestamp without time zone DEFAULT now());
CREATE TABLE public.merchant_prospects (validated_at timestamp without time zone, current_step integer DEFAULT 0, agent_id integer NOT NULL, application_started_at timestamp without time zone, status text NOT NULL DEFAULT 'pending'::text, id integer NOT NULL DEFAULT nextval('merchant_prospects_id_seq'::regclass), last_name text NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now(), first_name text NOT NULL, validation_token text, form_data text, notes text, email text NOT NULL, updated_at timestamp without time zone NOT NULL DEFAULT now());
CREATE TABLE public.merchants (industry text, user_id character varying, ein text, created_at timestamp without time zone NOT NULL DEFAULT now(), business_name text NOT NULL, website text, processing_fee numeric NOT NULL DEFAULT 2.50, dba_name text, monthly_volume numeric NOT NULL DEFAULT '0'::numeric, business_type text NOT NULL, status text NOT NULL DEFAULT 'active'::text, id integer NOT NULL DEFAULT nextval('merchants_id_seq'::regclass), updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP, email text NOT NULL, legal_name text, company_id integer NOT NULL, agent_id integer, notes text, phone text NOT NULL);
CREATE TABLE public.pdf_form_fields (field_label text NOT NULL, field_type text NOT NULL, position integer NOT NULL, created_at timestamp without time zone DEFAULT now(), id integer NOT NULL DEFAULT nextval('pdf_form_fields_id_seq'::regclass), is_required boolean DEFAULT false, form_id integer NOT NULL, field_name text NOT NULL, section text, options ARRAY, default_value text, validation text);
CREATE TABLE public.pdf_form_submissions (applicant_email text, data text NOT NULL, id integer NOT NULL DEFAULT nextval('pdf_form_submissions_id_seq'::regclass), created_at timestamp without time zone DEFAULT now(), is_public boolean DEFAULT false, status text DEFAULT 'draft'::text, submission_token text NOT NULL, form_id integer NOT NULL, updated_at timestamp without time zone DEFAULT now(), submitted_by text);
CREATE TABLE public.pdf_forms (status text DEFAULT 'active'::text, file_size integer NOT NULL, id integer NOT NULL DEFAULT nextval('pdf_forms_id_seq'::regclass), created_at timestamp without time zone DEFAULT now(), updated_at timestamp without time zone DEFAULT now(), uploaded_by text NOT NULL, allowed_roles ARRAY DEFAULT '{admin}'::text[], show_in_navigation boolean DEFAULT false, file_name text NOT NULL, description text, name text NOT NULL, navigation_title text);
CREATE TABLE public.pricing_type_fee_items (is_required boolean NOT NULL DEFAULT true, id integer NOT NULL DEFAULT nextval('pricing_type_fee_items_id_seq'::regclass), display_order integer NOT NULL DEFAULT 0, pricing_type_id integer NOT NULL, fee_item_id integer NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now());
CREATE TABLE public.pricing_types (author text NOT NULL DEFAULT 'System'::text, description text, id integer NOT NULL DEFAULT nextval('pricing_types_id_seq'::regclass), is_active boolean NOT NULL DEFAULT true, created_at timestamp without time zone NOT NULL DEFAULT now(), updated_at timestamp without time zone NOT NULL DEFAULT now(), name text NOT NULL);
CREATE TABLE public.prospect_applications (template_version text NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now(), status text NOT NULL DEFAULT 'draft'::text, submitted_at timestamp without time zone, updated_at timestamp without time zone NOT NULL DEFAULT now(), acquirer_id integer NOT NULL, application_data jsonb NOT NULL DEFAULT '{}'::jsonb, approved_at timestamp without time zone, template_id integer NOT NULL, generated_pdf_path text, rejected_at timestamp without time zone, prospect_id integer NOT NULL, rejection_reason text, id integer NOT NULL DEFAULT nextval('prospect_applications_id_seq'::regclass));
CREATE TABLE public.prospect_owners (created_at timestamp without time zone DEFAULT now(), email text NOT NULL, signature_token text, id integer NOT NULL DEFAULT nextval('prospect_owners_id_seq'::regclass), ownership_percentage numeric NOT NULL, email_sent_at timestamp without time zone, prospect_id integer NOT NULL, updated_at timestamp without time zone DEFAULT now(), name text NOT NULL, email_sent boolean DEFAULT false);
CREATE TABLE public.prospect_signatures (signature_type text NOT NULL, submitted_at timestamp without time zone DEFAULT now(), signature_token text NOT NULL, signature text NOT NULL, owner_id integer NOT NULL, prospect_id integer NOT NULL, id integer NOT NULL DEFAULT nextval('prospect_signatures_id_seq'::regclass));
CREATE TABLE public.schema_migrations (name character varying NOT NULL, applied_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP, migration_id character varying NOT NULL, environment character varying NOT NULL, id integer NOT NULL DEFAULT nextval('schema_migrations_id_seq'::regclass), checksum character varying NOT NULL);
CREATE TABLE public.security_events (resolution text, severity text NOT NULL, updated_at timestamp without time zone NOT NULL DEFAULT now(), event_type text NOT NULL, affected_users jsonb, assigned_to character varying, id integer NOT NULL DEFAULT nextval('security_events_id_seq'::regclass), detection_method text, detected_at timestamp without time zone NOT NULL DEFAULT now(), audit_log_id integer, affected_resources jsonb, alert_status text DEFAULT 'new'::text, resolved_at timestamp without time zone, mitigation_actions jsonb, detected_by text, investigation_notes text, resolved_by character varying, created_at timestamp without time zone NOT NULL DEFAULT now());
CREATE TABLE public.sessions (expire timestamp without time zone NOT NULL, sid character varying NOT NULL, sess jsonb NOT NULL);
CREATE TABLE public.transactions (amount numeric NOT NULL, merchant_id integer NOT NULL, transaction_id text NOT NULL, net_amount numeric, transaction_date timestamp with time zone DEFAULT CURRENT_TIMESTAMP, transaction_type text NOT NULL DEFAULT 'payment'::text, status text NOT NULL, commission_amount numeric DEFAULT 0, processed_at timestamp with time zone, created_at timestamp without time zone DEFAULT now(), mid character varying, id integer NOT NULL DEFAULT nextval('transactions_id_seq'::regclass), commission_rate numeric DEFAULT 0.025, payment_method text NOT NULL, reference_number text, processing_fee numeric, location_id integer);
CREATE TABLE public.trigger_actions (delay_seconds integer DEFAULT 0, is_active boolean DEFAULT true, requires_sms_preference boolean DEFAULT false, trigger_id integer NOT NULL, conditions jsonb, id integer NOT NULL DEFAULT nextval('trigger_actions_id_seq'::regclass), created_at timestamp without time zone DEFAULT now(), max_retries integer DEFAULT 3, updated_at timestamp without time zone DEFAULT now(), sequence_order integer DEFAULT 1, action_template_id integer NOT NULL, retry_on_failure boolean DEFAULT true, requires_email_preference boolean DEFAULT false);
CREATE TABLE public.trigger_catalog (trigger_key character varying NOT NULL, description text, created_at timestamp without time zone DEFAULT now(), updated_at timestamp without time zone DEFAULT now(), context_schema jsonb, is_active boolean DEFAULT true, name character varying NOT NULL, category character varying NOT NULL, id integer NOT NULL DEFAULT nextval('trigger_catalog_id_seq'::regclass));
CREATE TABLE public.two_factor_codes (used boolean DEFAULT false, id integer NOT NULL DEFAULT nextval('two_factor_codes_id_seq'::regclass), expires_at timestamp without time zone NOT NULL, created_at timestamp without time zone DEFAULT now(), code character varying NOT NULL, type character varying NOT NULL, user_id character varying NOT NULL);
CREATE TABLE public.user_alerts (action_url text, id integer NOT NULL DEFAULT nextval('user_alerts_id_seq'::regclass), action_activity_id integer, message text NOT NULL, user_id character varying NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now(), read_at timestamp without time zone, is_read boolean NOT NULL DEFAULT false, type character varying NOT NULL DEFAULT 'info'::character varying);
CREATE TABLE public.user_company_associations (is_primary boolean NOT NULL DEFAULT false, user_id character varying NOT NULL, company_role text NOT NULL, title text, created_at timestamp without time zone NOT NULL DEFAULT now(), start_date timestamp without time zone, is_active boolean NOT NULL DEFAULT true, updated_at timestamp without time zone NOT NULL DEFAULT now(), id integer NOT NULL DEFAULT nextval('user_company_associations_id_seq'::regclass), end_date timestamp without time zone, company_id integer NOT NULL, permissions jsonb DEFAULT '{}'::jsonb, department text);
CREATE TABLE public.user_dashboard_preferences (widget_id text NOT NULL, created_at timestamp without time zone NOT NULL DEFAULT now(), size text NOT NULL DEFAULT 'medium'::text, id integer NOT NULL, updated_at timestamp without time zone NOT NULL DEFAULT now(), position integer NOT NULL DEFAULT 0, user_id text NOT NULL, configuration jsonb DEFAULT '{}'::jsonb, is_visible boolean NOT NULL DEFAULT true);
CREATE TABLE public.users (email_verification_token character varying, last_name character varying, last_login_at timestamp without time zone, password_reset_expires timestamp without time zone, roles ARRAY NOT NULL DEFAULT ARRAY['merchant'::text], email character varying NOT NULL, id character varying NOT NULL, phone character varying NOT NULL, password_reset_token character varying, permissions jsonb DEFAULT '{}'::jsonb, last_login_ip character varying, two_factor_enabled boolean DEFAULT false, first_name character varying, timezone character varying DEFAULT 'UTC'::character varying, two_factor_secret character varying, email_verified boolean DEFAULT false, username character varying NOT NULL, password_hash character varying NOT NULL, communication_preference text NOT NULL DEFAULT 'email'::text, profile_image_url character varying, created_at timestamp without time zone DEFAULT now(), updated_at timestamp without time zone DEFAULT now(), status text NOT NULL DEFAULT 'active'::text);